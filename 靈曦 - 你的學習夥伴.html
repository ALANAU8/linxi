<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>靈曦 - 你的學習星系 | AI個人化學習平台</title>
    <meta name="description" content="點亮你的知識宇宙，探索專屬的學習軌跡。靈曦是創新的AI學習平台，提供個人化學習路徑、智慧導航和24/7學習陪伴。" />
    <meta name="keywords" content="AI學習,個人化教育,智慧學習,線上學習平台,學習助手" />
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.1.0/fonts/remixicon.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    
    <!-- Supabase JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style>
        :root {
            --primary: #0f1c3f;
            --secondary: #1a2b5f;
            --accent: #5d3fd3;
            --accent-light: #8a6eff;
            --text: #e6e6ff;
            --text-secondary: #a0a0c0;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--primary);
            color: var(--text);
            overflow-x: hidden;
        }
        
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .star {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            animation: twinkle 5s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            padding: 20px 0;
            position: sticky;
            top: 0;
            background-color: rgba(15, 28, 63, 0.9);
            backdrop-filter: blur(10px);
            z-index: 100;
            border-bottom: 1px solid rgba(93, 63, 211, 0.3);
        }
        
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(90deg, #8a6eff, #5d3fd3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .nav-links {
            display: flex;
            gap: 30px;
        }
        
        .nav-links a {
            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        .nav-links a:hover {
            color: var(--accent-light);
        }
        
        .auth-buttons {
            display: flex;
            gap: 15px;
        }
        
        .btn {
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid var(--accent);
            color: var(--accent-light);
        }
        
        .btn-outline:hover {
            background: var(--accent);
            color: white;
        }
        
        .btn-primary {
            background: linear-gradient(90deg, var(--accent), var(--accent-light));
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(93, 63, 211, 0.4);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }
        
        /* 模態框樣式 */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal {
            background: var(--secondary);
            border-radius: 15px;
            width: 90%;
            max-width: 450px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            transform: translateY(20px);
            transition: transform 0.3s;
            border: 1px solid rgba(93, 63, 211, 0.3);
        }
        
        .modal-overlay.active .modal {
            transform: translateY(0);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .close-modal:hover {
            color: var(--text);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border-radius: 8px;
            background: rgba(15, 28, 63, 0.7);
            border: 1px solid rgba(93, 63, 211, 0.3);
            color: var(--text);
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        .form-footer {
            margin-top: 20px;
            text-align: center;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .form-footer a {
            color: var(--accent-light);
            text-decoration: none;
            cursor: pointer;
        }
        
        .form-footer a:hover {
            text-decoration: underline;
        }
        
        .error-message {
            color: var(--danger);
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }
        
        .success-message {
            color: var(--success);
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }
        
        .hero {
            padding: 100px 0;
            text-align: center;
        }
        
        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            background: linear-gradient(90deg, #ffffff, var(--accent-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 40px;
            color: var(--text-secondary);
            line-height: 1.6;
        }
        
        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
        }
        
        .section-title {
            font-size: 2.5rem;
            margin-bottom: 60px;
            text-align: center;
            position: relative;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, var(--accent), var(--accent-light));
            border-radius: 3px;
        }
        
        .features {
            padding: 80px 0;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .feature-card {
            background: rgba(26, 43, 95, 0.5);
            border-radius: 15px;
            padding: 30px;
            transition: all 0.3s;
            border: 1px solid rgba(93, 63, 211, 0.2);
        }
        
        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(93, 63, 211, 0.2);
            border-color: var(--accent);
        }
        
        .feature-icon {
            font-size: 40px;
            margin-bottom: 20px;
            color: var(--accent-light);
        }
        
        .feature-card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
        }
        
        .feature-card p {
            color: var(--text-secondary);
            line-height: 1.6;
        }
        
        /* 星際導航員專用樣式 */
        .navigator-section {
            padding: 80px 0;
            background: rgba(15, 28, 63, 0.5);
            border-radius: 20px;
            margin: 40px 0;
        }
        
        .navigator-container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .navigator-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            position: relative;
        }
        
        .navigator-steps::before {
            content: '';
            position: absolute;
            top: 25px;
            left: 0;
            right: 0;
            height: 3px;
            background: rgba(93, 63, 211, 0.3);
            z-index: 1;
        }
        
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
        }
        
        .step-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(26, 43, 95, 0.8);
            border: 3px solid rgba(93, 63, 211, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .step.active .step-circle {
            background: var(--accent);
            border-color: var(--accent-light);
            box-shadow: 0 0 15px rgba(93, 63, 211, 0.5);
        }
        
        .step-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .step.active .step-label {
            color: var(--accent-light);
            font-weight: 600;
        }
        
        .navigator-content {
            background: rgba(26, 43, 95, 0.5);
            border-radius: 15px;
            padding: 30px;
            border: 1px solid rgba(93, 63, 211, 0.2);
            min-height: 400px;
        }
        
        .step-content {
            display: none;
        }
        
        .step-content.active {
            display: block;
        }
        
        .step-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border-radius: 8px;
            background: rgba(15, 28, 63, 0.7);
            border: 1px solid rgba(93, 63, 211, 0.3);
            color: var(--text);
            font-size: 1rem;
        }
        
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .checkbox-item input {
            width: 18px;
            height: 18px;
        }
        
        .navigator-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .learning-path {
            background: rgba(15, 28, 63, 0.7);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .path-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid rgba(93, 63, 211, 0.2);
        }
        
        .path-item:last-child {
            border-bottom: none;
        }
        
        .path-icon {
            font-size: 24px;
            margin-right: 15px;
        }
        
        .path-content {
            flex: 1;
        }
        
        .path-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .path-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .path-details {
            margin-top: 10px;
            padding: 10px;
            background: rgba(93, 63, 211, 0.1);
            border-radius: 5px;
            font-size: 0.85rem;
        }
        
        .path-resources {
            margin-top: 10px;
        }
        
        .resource-link {
            display: inline-block;
            padding: 5px 10px;
            background: rgba(138, 110, 255, 0.2);
            border-radius: 4px;
            margin-right: 10px;
            margin-bottom: 5px;
            font-size: 0.8rem;
            color: var(--accent-light);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .resource-link:hover {
            background: rgba(138, 110, 255, 0.4);
        }
        
        .path-status {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .status-pending {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
        }
        
        .status-completed {
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
        }
        
        .status-current {
            background: rgba(0, 123, 255, 0.2);
            color: #007bff;
        }
        
        .ai-analysis {
            background: rgba(93, 63, 211, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border-left: 4px solid var(--accent);
        }
        
        .ai-analysis h4 {
            margin-bottom: 10px;
            color: var(--accent-light);
        }
        
        .ai-analysis p {
            color: var(--text-secondary);
            line-height: 1.6;
        }
        
        .ai-assistant {
            padding: 80px 0;
            text-align: center;
        }
        
        .ai-container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(26, 43, 95, 0.5);
            border-radius: 15px;
            padding: 30px;
            border: 1px solid rgba(93, 63, 211, 0.2);
        }
        
        .personality-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .personality-btn {
            padding: 10px 20px;
            border-radius: 30px;
            background: transparent;
            border: 2px solid var(--accent);
            color: var(--text);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .personality-btn.active {
            background: var(--accent);
            color: white;
        }
        
        .chat-container {
            background: rgba(15, 28, 63, 0.7);
            border-radius: 10px;
            height: 300px;
            overflow-y: auto;
            padding: 20px;
            margin-bottom: 20px;
            text-align: left;
        }
        
        .message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 10px;
            max-width: 80%;
        }
        
        .ai-message {
            background: rgba(93, 63, 211, 0.3);
            border-left: 3px solid var(--accent);
        }
        
        .user-message {
            background: rgba(26, 43, 95, 0.5);
            margin-left: auto;
            border-right: 3px solid var(--accent-light);
        }
        
        .chat-input {
            display: flex;
            gap: 10px;
        }
        
        .chat-input input {
            flex: 1;
            padding: 12px 15px;
            border-radius: 30px;
            background: rgba(15, 28, 63, 0.7);
            border: 1px solid rgba(93, 63, 211, 0.3);
            color: var(--text);
        }
        
        .chat-input button {
            padding: 12px 25px;
            border-radius: 30px;
            background: var(--accent);
            color: white;
            border: none;
            cursor: pointer;
        }
        
        .community {
            padding: 80px 0;
        }
        
        .community-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .community-card {
            background: rgba(26, 43, 95, 0.5);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s;
            border: 1px solid rgba(93, 63, 211, 0.2);
        }
        
        .community-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(93, 63, 211, 0.2);
            border-color: var(--accent);
        }
        
        .community-icon {
            font-size: 50px;
            margin-bottom: 20px;
            color: var(--accent-light);
        }
        
        footer {
            padding: 60px 0 30px;
            background: rgba(15, 28, 63, 0.9);
            border-top: 1px solid rgba(93, 63, 211, 0.3);
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }
        
        .footer-column h3 {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: var(--accent-light);
        }
        
        .footer-column ul {
            list-style: none;
        }
        
        .footer-column ul li {
            margin-bottom: 10px;
        }
        
        .footer-column ul li a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-column ul li a:hover {
            color: var(--accent-light);
        }
        
        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(93, 63, 211, 0.2);
            color: var(--text-secondary);
        }
        
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .personality-selector {
                flex-direction: column;
                align-items: center;
            }
            
            .navigator-steps {
                flex-direction: column;
                align-items: flex-start;
                gap: 20px;
            }
            
            .navigator-steps::before {
                display: none;
            }
            
            .step {
                flex-direction: row;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- 星空背景 -->
    <div class="stars" id="stars"></div>
    
    <!-- 導航欄 -->
    <header>
        <div class="container">
            <nav class="navbar">
                <div class="logo">
                    <img src="">🌌</span>
                    <span>靈曦</span>
                </div>
                <div class="nav-links">
                    <a href="#features">核心功能</a>
                    <a href="#navigator">星際導航員</a>
                    <a href="#ai-assistant">AI伴學精靈</a>
                    <a href="#community">星際社群</a>
                </div>
                <div class="auth-buttons" id="authButtons">
                    <!-- 登入/註冊按鈕將在這裡動態生成 -->
                </div>
            </nav>
        </div>
    </header>
    
    <!-- 註冊模態框 -->
    <div class="modal-overlay" id="registerModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">註冊靈曦帳號</h2>
                <button class="close-modal" id="closeRegisterModal">&times;</button>
            </div>
            <form id="registerForm">
                <div class="form-group">
                    <label for="registerUsername">用戶名</label>
                    <input type="text" id="registerUsername" class="form-control" placeholder="請輸入用戶名" required>
                    <div class="error-message" id="usernameError"></div>
                </div>
                <div class="form-group">
                    <label for="registerEmail">電子郵件</label>
                    <input type="email" id="registerEmail" class="form-control" placeholder="請輸入電子郵件" required>
                    <div class="error-message" id="emailError"></div>
                </div>
                <div class="form-group">
                    <label for="registerPassword">密碼</label>
                    <input type="password" id="registerPassword" class="form-control" placeholder="請輸入密碼" required>
                    <div class="error-message" id="passwordError"></div>
                </div>
                <div class="form-group">
                    <label for="registerConfirmPassword">確認密碼</label>
                    <input type="password" id="registerConfirmPassword" class="form-control" placeholder="請再次輸入密碼" required>
                    <div class="error-message" id="confirmPasswordError"></div>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">註冊</button>
                <div class="success-message" id="registerSuccess">註冊成功！</div>
            </form>
            <div class="form-footer">
                已經有帳號？ <a id="showLoginForm">立即登入</a>
            </div>
        </div>
    </div>
    
    <!-- 登入模態框 -->
    <div class="modal-overlay" id="loginModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">登入靈曦</h2>
                <button class="close-modal" id="closeLoginModal">&times;</button>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">電子郵件</label>
                    <input type="email" id="loginEmail" class="form-control" placeholder="請輸入電子郵件" required>
                    <div class="error-message" id="loginEmailError"></div>
                </div>
                <div class="form-group">
                    <label for="loginPassword">密碼</label>
                    <input type="password" id="loginPassword" class="form-control" placeholder="請輸入密碼" required>
                    <div class="error-message" id="loginPasswordError"></div>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">登入</button>
                <div class="error-message" id="loginError"></div>
            </form>
            <div class="form-footer">
                還沒有帳號？ <a id="showRegisterForm">立即註冊</a>
            </div>
        </div>
    </div>
    
    <!-- 英雄區域 -->
    <section class="hero">
        <div class="container">
            <h1>點亮你的知識宇宙<br>探索專屬的學習軌跡</h1>
            <p>在AI的引導下，於知識的朦朧清晨中找到第一縷靈感之光，照亮屬於自己的知識宇宙。</p>
            <div class="hero-buttons">
                <button class="btn btn-primary" id="startNavigator">原力覺醒測驗</button>
                <button class="btn btn-outline">探索星際航線</button>
            </div>
        </div>
    </section>
    
    <!-- 星際導航員 -->
    <section class="navigator-section" id="navigator">
        <div class="container">
            <h2 class="section-title">星際導航員</h2>
            <div class="navigator-container">
                <div class="navigator-steps">
                    <div class="step active" data-step="1">
                        <div class="step-circle">1</div>
                        <div class="step-label">學習風格</div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-circle">2</div>
                        <div class="step-label">目標設定</div>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-circle">3</div>
                        <div class="step-label">興趣領域</div>
                    </div>
                    <div class="step" data-step="4">
                        <div class="step-circle">4</div>
                        <div class="step-label">學習路徑</div>
                    </div>
                </div>
                
                <div class="navigator-content">
                    <!-- 步驟1: 學習風格 -->
                    <div class="step-content active" id="step1">
                        <h3 class="step-title">探索你的學習風格</h3>
                        <p style="text-align: center; margin-bottom: 30px; color: var(--text-secondary);">了解你的學習風格有助於AI為你打造最適合的學習體驗</p>
                        
                        <div class="form-group">
                            <label>你通常如何學習新知識？</label>
                            <select class="form-control" id="learningStyle">
                                <option value="">請選擇你的學習風格</option>
                                <option value="visual">視覺型 - 透過圖表、影片和圖像學習效果最好</option>
                                <option value="auditory">聽覺型 - 透過聽講、討論和音頻學習效果最好</option>
                                <option value="kinesthetic">動覺型 - 透過動手實踐和親身體驗學習效果最好</option>
                                <option value="reading">閱讀型 - 透過閱讀文字和書籍學習效果最好</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>你的注意力集中時間通常是？</label>
                            <select class="form-control" id="attentionSpan">
                                <option value="">請選擇你的注意力集中時間</option>
                                <option value="short">短時間（15-25分鐘）</option>
                                <option value="medium">中等時間（30-45分鐘）</option>
                                <option value="long">長時間（60分鐘以上）</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>你更喜歡的學習節奏？</label>
                            <select class="form-control" id="learningPace">
                                <option value="">請選擇你的學習節奏</option>
                                <option value="slow">慢速 - 喜歡深入理解每個概念</option>
                                <option value="moderate">中等 - 平衡深度和進度</option>
                                <option value="fast">快速 - 喜歡快速掌握大綱和核心概念</option>
                            </select>
                        </div>
                        
                        <div class="navigator-actions">
                            <div></div> <!-- 空div用於對齊 -->
                            <button class="btn btn-primary" id="nextStep1">下一步</button>
                        </div>
                    </div>
                    
                    <!-- 步驟2: 目標設定 -->
                    <div class="step-content" id="step2">
                        <h3 class="step-title">設定你的學習目標</h3>
                        <p style="text-align: center; margin-bottom: 30px; color: var(--text-secondary);">明確的目標能幫助AI為你規劃最有效的學習路徑</p>
                        
                        <div class="form-group">
                            <label>你的主要學習目標是？</label>
                            <select class="form-control" id="learningGoal">
                                <option value="">請選擇你的學習目標</option>
                                <option value="academic">學業進步 - 提高學校成績或準備考試</option>
                                <option value="career">職業發展 - 學習新技能以促進職業發展</option>
                                <option value="personal">個人興趣 - 探索新領域或發展興趣愛好</option>
                                <option value="certification">專業認證 - 準備專業認證考試</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>你希望達到的學習程度？</label>
                            <select class="form-control" id="proficiencyLevel">
                                <option value="">請選擇期望的熟練程度</option>
                                <option value="basic">基礎了解 - 掌握基本概念和術語</option>
                                <option value="intermediate">中級應用 - 能夠應用知識解決問題</option>
                                <option value="advanced">高級精通 - 深入理解並能創新應用</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>你預計的學習時間投入？</label>
                            <select class="form-control" id="timeCommitment">
                                <option value="">請選擇每週預計學習時間</option>
                                <option value="light">輕度（1-5小時/週）</option>
                                <option value="moderate">中度（6-10小時/週）</option>
                                <option value="intensive">密集（11-20小時/週）</option>
                                <option value="full">全職（20+小時/週）</option>
                            </select>
                        </div>
                        
                        <div class="navigator-actions">
                            <button class="btn btn-outline" id="prevStep2">上一步</button>
                            <button class="btn btn-primary" id="nextStep2">下一步</button>
                        </div>
                    </div>
                    
                    <!-- 步驟3: 興趣領域 -->
                    <div class="step-content" id="step3">
                        <h3 class="step-title">選擇你的興趣領域</h3>
                        <p style="text-align: center; margin-bottom: 30px; color: var(--text-secondary);">選擇你感興趣的知識星球，AI將為你規劃專屬的星際航線</p>
                        
                        <div class="form-group">
                            <label>選擇你感興趣的知識領域：</label>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="math" value="math">
                                    <label for="math">數學星球 🧮</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="physics" value="physics">
                                    <label for="physics">物理星球 🌌</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="chemistry" value="chemistry">
                                    <label for="chemistry">化學星球 ⚗️</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="programming" value="programming">
                                    <label for="programming">程式設計星球 💻</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="literature" value="literature">
                                    <label for="literature">文學星球 📚</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="history" value="history">
                                    <label for="history">歷史星球 🏛️</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="biology" value="biology">
                                    <label for="biology">生物星球 🧬</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="art" value="art">
                                    <label for="art">藝術星球 🎨</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="language" value="language">
                                    <label for="language">語言星球 🗣️</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>你是否有特定的學習主題或技能想專注於？</label>
                            <textarea class="form-control" id="specificTopics" rows="3" placeholder="例如：機器學習、文藝復興藝術、有機化學..."></textarea>
                        </div>
                        
                        <div class="navigator-actions">
                            <button class="btn btn-outline" id="prevStep3">上一步</button>
                            <button class="btn btn-primary" id="nextStep3">生成學習路徑</button>
                        </div>
                    </div>
                    
                    <!-- 步驟4: 學習路徑 -->
                    <div class="step-content" id="step4">
                        <h3 class="step-title">你的專屬星際航線</h3>
                        <p style="text-align: center; margin-bottom: 30px; color: var(--text-secondary);">AI已根據你的學習風格、目標和興趣，為你規劃了專屬的學習路徑</p>
                        
                        <div class="ai-analysis">
                            <h4>🧠 AI學習分析</h4>
                            <p id="aiAnalysisText">根據你的學習風格和目標，AI建議採用模組化學習方法，專注於核心概念的建立，並透過實踐練習強化學習效果。</p>
                        </div>
                        
                        <div class="learning-path" id="learningPath">
                            <!-- 學習路徑將由JavaScript動態生成 -->
                        </div>
                        
                        <div class="navigator-actions">
                            <button class="btn btn-outline" id="prevStep4">重新設定</button>
                            <button class="btn btn-primary" id="savePath">保存學習路徑</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- 核心功能 -->
    <section class="features" id="features">
        <div class="container">
            <h2 class="section-title">探索學習星系</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">🧭</div>
                    <h3>星際導航員</h3>
                    <p>AI根據你的學習風格與目標，規劃專屬的星際航線，動態調整學習路徑。</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🪐</div>
                    <h3>知識星球</h3>
                    <p>每個學科都是一顆獨特的知識星球，擁有核心概念區和實踐環帶。</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🤖</div>
                    <h3>AI伴學精靈</h3>
                    <p>可選擇性格的AI助手，24/7解答疑問，智慧總結內容，分析錯題根源。</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🌠</div>
                    <h3>星際社群</h3>
                    <p>組成探險艦隊，參與知識交易站，分享星圖筆記，共同攻占知識星球。</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- AI助手 -->
    <section class="ai-assistant" id="ai-assistant">
        <div class="container">
            <h2 class="section-title">AI伴學精靈</h2>
            <div class="ai-container">
                <div class="personality-selector">
                    <button class="personality-btn active">鼓勵型導師</button>
                    <button class="personality-btn">冷靜分析型</button>
                    <button class="personality-btn">幽默風趣型</button>
                </div>
                <div class="chat-container">
                    <div class="message ai-message">
                        你好！我是你的AI伴學精靈。我可以幫助你解答學習問題、總結內容，或是陪你討論學習策略。你今天想探索哪個知識星球呢？
                    </div>
                </div>
                <div class="chat-input">
                    <input type="text" placeholder="輸入你的問題或想法...">
                    <button>發送</button>
                </div>
            </div>
        </div>
    </section>
    
    <!-- 社群 -->
    <section class="community" id="community">
        <div class="container">
            <h2 class="section-title">星際社群</h2>
            <div class="community-grid">
                <div class="community-card">
                    <div class="community-icon">🚀</div>
                    <h3>學習公會</h3>
                    <p>基於共同目標組成探險艦隊，互相激勵，共同完成任務。</p>
                    <button class="btn btn-outline" style="margin-top: 20px;">加入公會</button>
                </div>
                <div class="community-card">
                    <div class="community-icon">🏆</div>
                    <h3>成就系統</h3>
                    <p>完成里程碑獲得專屬徽章與頭銜，收集星能解鎖特殊功能。</p>
                    <button class="btn btn-outline" style="margin-top: 20px;">查看成就</button>
                </div>
                <div class="community-card">
                    <div class="community-icon">💎</div>
                    <h3>知識交易站</h3>
                    <p>將學習筆記整理成星圖卡片，與他人交換或出售。</p>
                    <button class="btn btn-outline" style="margin-top: 20px;">探索交易站</button>
                </div>
            </div>
        </div>
    </section>
    
    <!-- 頁腳 -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>靈曦</h3>
                    <p>點亮你的知識宇宙，探索專屬的學習軌跡。</p>
                </div>
                <div class="footer-column">
                    <h3>探索</h3>
                    <ul>
                        <li><a href="#">知識星球</a></li>
                        <li><a href="#">星際航線</a></li>
                        <li><a href="#">原力測驗</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>資源</h3>
                    <ul>
                        <li><a href="#">星際指南</a></li>
                        <li><a href="#">知識庫</a></li>
                        <li><a href="#">常見問題</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>社群</h3>
                    <ul>
                        <li><a href="#">學習公會</a></li>
                        <li><a href="#">知識交易站</a></li>
                        <li><a href="#">成就榜</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 靈曦 - 你的學習星系。保留所有權利。</p>
            </div>
        </div>
    </footer>

    <!-- Readdy Agent Widget -->
    <script 
      src="https://readdy.ai/api/public/assistant/widget?projectId=fc951932-dc74-4a13-8a0a-3a61591b5195"
      mode="hybrid"
      voice-show-transcript="true"
      theme="light"
      size="compact"
      accent-color="#14B8A6"
      button-base-color="#000000"
      button-accent-color="#FFFFFF"
      defer
    ></script>

    <script>
        // 初始化 Supabase
        const SUPABASE_URL = 'https://ixrakwrwobgjvbhbzgxs.supabase.co'
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml4cmFrd3J3b2JnanZiaGJ6Z3hzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA4MDgzNDQsImV4cCI6MjA3NjM4NDM0NH0.1ZG-_w230-Q6LYyBxh4lHXnqL-UFXYhS2p2gs8AHZwE'
        
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        // 創建星空背景
        function createStars() {
            const starsContainer = document.getElementById('stars');
            const starCount = 150;
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                
                const size = Math.random() * 3;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                
                star.style.animationDelay = `${Math.random() * 5}s`;
                
                starsContainer.appendChild(star);
            }
        }
        
        // 用戶管理系統
        class UserManager {
            constructor() {
                this.currentUser = null;
                this.checkAuthState();
            }
            
            // 檢查認證狀態
            async checkAuthState() {
                const { data: { session } } = await supabase.auth.getSession();
                if (session) {
                    this.currentUser = session.user;
                    this.updateAuthUI();
                    
                    // 檢查用戶資料是否存在
                    await this.checkUserProfile();
                } else {
                    this.updateAuthUI();
                }
                
                // 監聽認證狀態變化
                supabase.auth.onAuthStateChange((event, session) => {
                    if (event === 'SIGNED_IN' && session) {
                        this.currentUser = session.user;
                        this.updateAuthUI();
                        this.checkUserProfile();
                    } else if (event === 'SIGNED_OUT') {
                        this.currentUser = null;
                        this.updateAuthUI();
                    }
                });
            }
            
            // 檢查用戶資料是否存在
            async checkUserProfile() {
                const { data, error } = await supabase
                    .from('profiles')
                    .select('*')
                    .eq('id', this.currentUser.id)
                    .single();
                    
                if (error && error.code === 'PGRST116') {
                    // 用戶資料不存在，創建新資料
                    await this.createUserProfile();
                }
            }
            
            // 創建用戶資料
            async createUserProfile() {
                const { error } = await supabase
                    .from('profiles')
                    .insert([
                        { 
                            id: this.currentUser.id,
                            username: this.currentUser.email.split('@')[0],
                            email: this.currentUser.email,
                            created_at: new Date().toISOString()
                        }
                    ]);
                    
                if (error) {
                    console.error('創建用戶資料錯誤:', error);
                }
            }
            
            // 註冊新用戶
            async register(email, password, username) {
                try {
                    const { data, error } = await supabase.auth.signUp({
                        email,
                        password,
                        options: {
                            data: {
                                username: username
                            }
                        }
                    });
                    
                    if (error) {
                        return { success: false, message: error.message };
                    }
                    
                    return { success: true, user: data.user };
                } catch (error) {
                    return { success: false, message: '註冊過程中發生錯誤' };
                }
            }
            
            // 登入
            async login(email, password) {
                try {
                    const { data, error } = await supabase.auth.signInWithPassword({
                        email,
                        password
                    });
                    
                    if (error) {
                        return { success: false, message: error.message };
                    }
                    
                    this.currentUser = data.user;
                    this.updateAuthUI();
                    return { success: true, user: data.user };
                } catch (error) {
                    return { success: false, message: '登入過程中發生錯誤' };
                }
            }
            
            // 登出
            async logout() {
                const { error } = await supabase.auth.signOut();
                if (error) {
                    console.error('登出錯誤:', error);
                }
                this.currentUser = null;
                this.updateAuthUI();
            }
            
            // 更新UI顯示用戶狀態
            updateAuthUI() {
                const authButtons = document.getElementById('authButtons');
                
                if (this.currentUser) {
                    // 用戶已登入
                    const username = this.currentUser.user_metadata?.username || this.currentUser.email.split('@')[0];
                    
                    authButtons.innerHTML = `
                        <div class="user-info">
                            <div class="user-avatar">${username.charAt(0).toUpperCase()}</div>
                            <span>${username}</span>
                        </div>
                        <button class="btn btn-outline" id="logoutBtn">登出</button>
                    `;
                    
                    document.getElementById('logoutBtn').addEventListener('click', () => {
                        this.logout();
                    });
                } else {
                    // 用戶未登入
                    authButtons.innerHTML = `
                        <button class="btn btn-outline" id="loginBtn">登入</button>
                        <button class="btn btn-primary" id="registerBtn">註冊</button>
                    `;
                    
                    document.getElementById('loginBtn').addEventListener('click', () => {
                        document.getElementById('loginModal').classList.add('active');
                    });
                    
                    document.getElementById('registerBtn').addEventListener('click', () => {
                        document.getElementById('registerModal').classList.add('active');
                    });
                }
            }
        }
        
        // 初始化用戶管理器
        const userManager = new UserManager();
        
        // 模態框功能
        function setupModals() {
            // 註冊模態框
            const registerModal = document.getElementById('registerModal');
            const closeRegisterModal = document.getElementById('closeRegisterModal');
            const showLoginForm = document.getElementById('showLoginForm');
            
            closeRegisterModal.addEventListener('click', () => {
                registerModal.classList.remove('active');
            });
            
            showLoginForm.addEventListener('click', () => {
                registerModal.classList.remove('active');
                document.getElementById('loginModal').classList.add('active');
            });
            
            // 登入模態框
            const loginModal = document.getElementById('loginModal');
            const closeLoginModal = document.getElementById('closeLoginModal');
            const showRegisterForm = document.getElementById('showRegisterForm');
            
            closeLoginModal.addEventListener('click', () => {
                loginModal.classList.remove('active');
            });
            
            showRegisterForm.addEventListener('click', () => {
                loginModal.classList.remove('active');
                registerModal.classList.add('active');
            });
            
            // 點擊模態框外部關閉
            [registerModal, loginModal].forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.classList.remove('active');
                    }
                });
            });
        }
        
        // 表單驗證和提交
        function setupForms() {
            // 註冊表單
            const registerForm = document.getElementById('registerForm');
            registerForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                // 重置錯誤消息
                document.querySelectorAll('.error-message').forEach(el => {
                    el.style.display = 'none';
                });
                document.getElementById('registerSuccess').style.display = 'none';
                
                const username = document.getElementById('registerUsername').value;
                const email = document.getElementById('registerEmail').value;
                const password = document.getElementById('registerPassword').value;
                const confirmPassword = document.getElementById('registerConfirmPassword').value;
                
                let hasError = false;
                
                // 用戶名驗證
                if (username.length < 3) {
                    document.getElementById('usernameError').textContent = '用戶名至少需要3個字符';
                    document.getElementById('usernameError').style.display = 'block';
                    hasError = true;
                }
                
                // 郵件驗證
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    document.getElementById('emailError').textContent = '請輸入有效的電子郵件地址';
                    document.getElementById('emailError').style.display = 'block';
                    hasError = true;
                }
                
                // 密碼驗證
                if (password.length < 6) {
                    document.getElementById('passwordError').textContent = '密碼至少需要6個字符';
                    document.getElementById('passwordError').style.display = 'block';
                    hasError = true;
                }
                
                // 確認密碼
                if (password !== confirmPassword) {
                    document.getElementById('confirmPasswordError').textContent = '密碼不匹配';
                    document.getElementById('confirmPasswordError').style.display = 'block';
                    hasError = true;
                }
                
                if (!hasError) {
                    // 提交註冊
                    const result = await userManager.register(email, password, username);
                    
                    if (result.success) {
                        document.getElementById('registerSuccess').style.display = 'block';
                        registerForm.reset();
                        
                        // 自動關閉模態框
                        setTimeout(() => {
                            document.getElementById('registerModal').classList.remove('active');
                        }, 1500);
                    } else {
                        document.getElementById('emailError').textContent = result.message;
                        document.getElementById('emailError').style.display = 'block';
                    }
                }
            });
            
            // 登入表單
            const loginForm = document.getElementById('loginForm');
            loginForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                // 重置錯誤消息
                document.querySelectorAll('.error-message').forEach(el => {
                    el.style.display = 'none';
                });
                
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                
                // 基本驗證
                if (!email) {
                    document.getElementById('loginEmailError').textContent = '請輸入電子郵件';
                    document.getElementById('loginEmailError').style.display = 'block';
                    return;
                }
                
                if (!password) {
                    document.getElementById('loginPasswordError').textContent = '請輸入密碼';
                    document.getElementById('loginPasswordError').style.display = 'block';
                    return;
                }
                
                // 嘗試登入
                const result = await userManager.login(email, password);
                
                if (result.success) {
                    loginForm.reset();
                    document.getElementById('loginModal').classList.remove('active');
                } else {
                    document.getElementById('loginError').textContent = result.message;
                    document.getElementById('loginError').style.display = 'block';
                }
            });
        }
        
        // 星際導航員功能
        function setupNavigator() {
            const steps = document.querySelectorAll('.step');
            const stepContents = document.querySelectorAll('.step-content');
            let currentStep = 1;
            
            // 更新步驟顯示
            function updateSteps() {
                steps.forEach(step => {
                    const stepNum = parseInt(step.getAttribute('data-step'));
                    if (stepNum === currentStep) {
                        step.classList.add('active');
                    } else {
                        step.classList.remove('active');
                    }
                });
                
                stepContents.forEach(content => {
                    const contentId = content.id;
                    const contentStep = parseInt(contentId.replace('step', ''));
                    if (contentStep === currentStep) {
                        content.classList.add('active');
                    } else {
                        content.classList.remove('active');
                    }
                });
            }
            
            // 下一步按鈕事件
            document.getElementById('nextStep1').addEventListener('click', function() {
                currentStep = 2;
                updateSteps();
            });
            
            document.getElementById('nextStep2').addEventListener('click', function() {
                currentStep = 3;
                updateSteps();
            });
            
            document.getElementById('nextStep3').addEventListener('click', function() {
                currentStep = 4;
                updateSteps();
                generateLearningPath();
            });
            
            // 上一步按鈕事件
            document.getElementById('prevStep2').addEventListener('click', function() {
                currentStep = 1;
                updateSteps();
            });
            
            document.getElementById('prevStep3').addEventListener('click', function() {
                currentStep = 2;
                updateSteps();
            });
            
            document.getElementById('prevStep4').addEventListener('click', function() {
                currentStep = 1;
                updateSteps();
            });
            
            // 保存學習路徑
            document.getElementById('savePath').addEventListener('click', async function() {
                if (!userManager.currentUser) {
                    alert('請先登入以保存學習路徑');
                    document.getElementById('loginModal').classList.add('active');
                    return;
                }
                
                // 收集學習路徑數據
                const learningStyle = document.getElementById('learningStyle').value;
                const attentionSpan = document.getElementById('attentionSpan').value;
                const learningPace = document.getElementById('learningPace').value;
                const learningGoal = document.getElementById('learningGoal').value;
                const proficiencyLevel = document.getElementById('proficiencyLevel').value;
                const timeCommitment = document.getElementById('timeCommitment').value;
                
                // 獲取選中的興趣領域
                const interests = [];
                const interestCheckboxes = document.querySelectorAll('input[type="checkbox"]:checked');
                interestCheckboxes.forEach(checkbox => {
                    interests.push(checkbox.value);
                });
                
                const specificTopics = document.getElementById('specificTopics').value;
                
                // 保存到 Supabase
                const { error } = await supabase
                    .from('learning_paths')
                    .insert([
                        {
                            user_id: userManager.currentUser.id,
                            learning_style: learningStyle,
                            attention_span: attentionSpan,
                            learning_pace: learningPace,
                            learning_goal: learningGoal,
                            proficiency_level: proficiencyLevel,
                            time_commitment: timeCommitment,
                            interests: interests,
                            specific_topics: specificTopics,
                            created_at: new Date().toISOString()
                        }
                    ]);
                    
                if (error) {
                    console.error('保存學習路徑錯誤:', error);
                    alert('保存學習路徑時發生錯誤');
                } else {
                    alert('學習路徑已保存！現在開始你的星際探索之旅吧！');
                }
            });
            
            // 從英雄區域開始導航員
            document.getElementById('startNavigator').addEventListener('click', function() {
                if (!userManager.currentUser) {
                    document.getElementById('loginModal').classList.add('active');
                } else {
                    document.getElementById('navigator').scrollIntoView({ behavior: 'smooth' });
                }
            });
        }
        
        // 優質線上學習資源庫
        const learningResources = {
            math: [
                { name: "Khan Academy 數學", url: "https://www.khanacademy.org/math", type: "video" },
                { name: "3Blue1Brown 可視化數學", url: "https://www.3blue1brown.com/", type: "video" },
                { name: "Brilliant 互動數學", url: "https://brilliant.org/courses/math-fundamentals/", type: "interactive" },
                { name: "MIT OpenCourseWare 數學", url: "https://ocw.mit.edu/courses/mathematics/", type: "course" }
            ],
            programming: [
                { name: "FreeCodeCamp", url: "https://www.freecodecamp.org/", type: "interactive" },
                { name: "Codecademy", url: "https://www.codecademy.com/", type: "interactive" },
                { name: "MDN Web Docs", url: "https://developer.mozilla.org/", type: "documentation" },
                { name: "Harvard CS50", url: "https://cs50.harvard.edu/", type: "course" },
                { name: "LeetCode 演算法練習", url: "https://leetcode.com/", type: "practice" }
            ],
            physics: [
                { name: "Khan Academy 物理", url: "https://www.khanacademy.org/science/physics", type: "video" },
                { name: "The Feynman Lectures", url: "https://www.feynmanlectures.caltech.edu/", type: "book" },
                { name: "Physics Classroom", url: "https://www.physicsclassroom.com/", type: "interactive" },
                { name: "MIT OpenCourseWare 物理", url: "https://ocw.mit.edu/courses/physics/", type: "course" }
            ],
            literature: [
                { name: "Project Gutenberg 免費電子書", url: "https://www.gutenberg.org/", type: "book" },
                { name: "Coursera 文學課程", url: "https://www.coursera.org/browse/arts-and-humanities/literature", type: "course" },
                { name: "Poetry Foundation", url: "https://www.poetryfoundation.org/", type: "resource" },
                { name: "The British Library 文學資源", url: "https://www.bl.uk/subjects/literature", type: "resource" }
            ],
            language: [
                { name: "Duolingo", url: "https://www.duolingo.com/", type: "interactive" },
                { name: "Memrise", url: "https://www.memrise.com/", type: "interactive" },
                { name: "BBC Languages", url: "http://www.bbc.co.uk/languages/", type: "resource" },
                { name: "TED Talks 多語言", url: "https://www.ted.com/talks", type: "video" }
            ]
        };
        
        // 生成學習路徑
        function generateLearningPath() {
            const learningStyle = document.getElementById('learningStyle').value;
            const attentionSpan = document.getElementById('attentionSpan').value;
            const learningPace = document.getElementById('learningPace').value;
            const learningGoal = document.getElementById('learningGoal').value;
            const proficiencyLevel = document.getElementById('proficiencyLevel').value;
            const timeCommitment = document.getElementById('timeCommitment').value;
            
            // 獲取選中的興趣領域
            const interests = [];
            const interestCheckboxes = document.querySelectorAll('input[type="checkbox"]:checked');
            interestCheckboxes.forEach(checkbox => {
                interests.push(checkbox.value);
            });
            
            const specificTopics = document.getElementById('specificTopics').value;
            
            // 生成AI分析文本
            let analysisText = "根據你的學習風格和目標，AI建議";
            
            if (learningStyle === 'visual') {
                analysisText += "採用視覺化學習方法，多使用圖表、影片和圖像來幫助理解概念。";
            } else if (learningStyle === 'auditory') {
                analysisText += "採用聽覺學習方法，多參與討論和聽取講解來強化學習效果。";
            } else if (learningStyle === 'kinesthetic') {
                analysisText += "採用實踐學習方法，透過動手操作和實際應用來鞏固知識。";
            } else {
                analysisText += "採用閱讀學習方法，透過深入閱讀和筆記來掌握知識。";
            }
            
            if (attentionSpan === 'short') {
                analysisText += " 考慮到你的注意力集中時間較短，建議將學習內容分成小模組，每15-25分鐘休息一次。";
            } else if (attentionSpan === 'medium') {
                analysisText += " 考慮到你的注意力集中時間中等，建議每30-45分鐘安排一次休息。";
            } else {
                analysisText += " 考慮到你的注意力集中時間較長，可以安排較長的學習時段，但也要注意適當休息。";
            }
            
            if (learningPace === 'slow') {
                analysisText += " 你的學習節奏較慢，建議深入理解每個概念，不追求速度。";
            } else if (learningPace === 'fast') {
                analysisText += " 你的學習節奏較快，建議先掌握大綱和核心概念，再深入細節。";
            } else {
                analysisText += " 你的學習節奏適中，建議平衡深度和進度。";
            }
            
            // 根據學習目標提供建議
            if (learningGoal === 'academic') {
                analysisText += " 針對學業進步目標，建議專注於基礎概念的建立和考試技巧的練習。";
            } else if (learningGoal === 'career') {
                analysisText += " 針對職業發展目標，建議注重實用技能和行業相關知識的學習。";
            } else if (learningGoal === 'certification') {
                analysisText += " 針對專業認證目標，建議按照認證考試大綱進行系統性學習和模擬測試。";
            } else {
                analysisText += " 針對個人興趣目標，建議保持學習的樂趣和探索精神。";
            }
            
            document.getElementById('aiAnalysisText').textContent = analysisText;
            
            // 生成學習路徑
            const learningPath = document.getElementById('learningPath');
            learningPath.innerHTML = '';
            
            // 根據興趣領域生成學習模組
            const modules = [];
            
            if (interests.includes('math')) {
                modules.push({
                    title: '數學基礎概念',
                    icon: '🧮',
                    description: '建立數學思維基礎，掌握核心概念和公式',
                    duration: '2週',
                    status: 'current',
                    details: '從代數、幾何和基礎統計學開始，建立數學思維框架。',
                    resources: learningResources.math
                });
                
                if (proficiencyLevel === 'intermediate' || proficiencyLevel === 'advanced') {
                    modules.push({
                        title: '高級數學應用',
                        icon: '📊',
                        description: '學習微積分、線性代數和概率論',
                        duration: '3週',
                        status: 'pending',
                        details: '深入理解數學在現實世界中的應用，解決複雜問題。',
                        resources: learningResources.math.filter(r => r.name.includes("MIT") || r.name.includes("3Blue1Brown"))
                    });
                }
            }
            
            if (interests.includes('programming')) {
                modules.push({
                    title: '程式設計入門',
                    icon: '💻',
                    description: '學習程式設計基礎，掌握邏輯思維和基本語法',
                    duration: '3週',
                    status: interests.includes('math') ? 'pending' : 'current',
                    details: '從Python或JavaScript開始，學習變數、函數、控制流程等基礎概念。',
                    resources: learningResources.programming.filter(r => r.name.includes("FreeCodeCamp") || r.name.includes("Codecademy"))
                });
                
                if (proficiencyLevel === 'intermediate' || proficiencyLevel === 'advanced') {
                    modules.push({
                        title: '演算法與數據結構',
                        icon: '⚙️',
                        description: '掌握高效解決問題的演算法和數據組織方法',
                        duration: '4週',
                        status: 'pending',
                        details: '學習排序、搜索、樹結構、圖算法等核心計算機科學概念。',
                        resources: learningResources.programming.filter(r => r.name.includes("LeetCode") || r.name.includes("Harvard"))
                    });
                }
            }
            
            if (interests.includes('physics')) {
                modules.push({
                    title: '物理學原理',
                    icon: '🌌',
                    description: '探索物理學基本原理，理解自然規律',
                    duration: '2週',
                    status: (interests.includes('math') || interests.includes('programming')) ? 'pending' : 'current',
                    details: '從力學、熱學和電磁學開始，建立物理學思維框架。',
                    resources: learningResources.physics
                });
            }
            
            if (interests.includes('literature')) {
                modules.push({
                    title: '文學欣賞與分析',
                    icon: '📚',
                    description: '學習文學分析方法，提升文學素養',
                    duration: '2週',
                    status: 'pending',
                    details: '閱讀經典文學作品，學習文學批評和文本分析方法。',
                    resources: learningResources.literature
                });
            }
            
            if (interests.includes('language')) {
                modules.push({
                    title: '語言學習基礎',
                    icon: '🗣️',
                    description: '建立語言學習基礎，掌握核心詞彙和語法',
                    duration: '4週',
                    status: 'pending',
                    details: '選擇一門目標語言，通過沉浸式學習方法快速入門。',
                    resources: learningResources.language
                });
            }
            
            // 如果有特定主題，添加自定義模組
            if (specificTopics) {
                modules.push({
                    title: `專題研究: ${specificTopics}`,
                    icon: '🔍',
                    description: '深入探索你感興趣的特定主題',
                    duration: '4週',
                    status: 'pending',
                    details: '根據你的具體興趣領域，設計個性化的深入學習計劃。',
                    resources: []
                });
            }
            
            // 根據學習風格調整模組順序和內容
            if (learningStyle === 'visual') {
                modules.forEach(module => {
                    if (module.resources) {
                        module.resources = module.resources.filter(r => r.type === 'video' || r.type === 'interactive');
                    }
                });
            } else if (learningStyle === 'auditory') {
                modules.forEach(module => {
                    if (module.resources) {
                        module.resources = module.resources.filter(r => r.type === 'video' || r.type === 'course');
                    }
                });
            } else if (learningStyle === 'reading') {
                modules.forEach(module => {
                    if (module.resources) {
                        module.resources = module.resources.filter(r => r.type === 'book' || r.type === 'documentation' || r.type === 'resource');
                    }
                });
            }
            
            // 添加複習和實踐模組
            modules.push({
                title: '綜合實踐與複習',
                icon: '🔄',
                description: '整合所學知識，進行綜合應用和複習',
                duration: '2週',
                status: 'pending',
                details: '通過項目實踐和綜合練習，鞏固所學知識並發現需要加強的領域。'
            });
            
            // 渲染學習路徑
            modules.forEach(module => {
                const pathItem = document.createElement('div');
                pathItem.className = 'path-item';
                
                let resourcesHTML = '';
                if (module.resources && module.resources.length > 0) {
                    resourcesHTML = '<div class="path-resources">推薦資源: ';
                    module.resources.forEach(resource => {
                        resourcesHTML += `<a href="${resource.url}" target="_blank" class="resource-link">${resource.name}</a>`;
                    });
                    resourcesHTML += '</div>';
                }
                
                pathItem.innerHTML = `
                    <div class="path-icon">${module.icon}</div>
                    <div class="path-content">
                        <div class="path-title">${module.title}</div>
                        <div class="path-desc">${module.description} • 預計時長: ${module.duration}</div>
                        <div class="path-details">${module.details}</div>
                        ${resourcesHTML}
                    </div>
                    <div class="path-status status-${module.status}">${module.status === 'current' ? '進行中' : '待開始'}</div>
                `;
                
                learningPath.appendChild(pathItem);
            });
            
            // 添加學習建議
            const adviceItem = document.createElement('div');
            adviceItem.className = 'path-item';
            adviceItem.innerHTML = `
                <div class="path-icon">💡</div>
                <div class="path-content">
                    <div class="path-title">學習建議</div>
                    <div class="path-desc">根據你的學習風格和目標定制的建議</div>
                    <div class="path-details">
                        <ul>
                            <li>每週安排固定學習時間，保持連續性</li>
                            <li>完成每個模組後進行自我測試，鞏固知識</li>
                            <li>加入相關學習社群，與他人交流學習心得</li>
                            <li>定期回顧學習進度，調整學習策略</li>
                        </ul>
                    </div>
                </div>
            `;
            learningPath.appendChild(adviceItem);
        }
        
        // AI助手功能
        function setupAIAssistant() {
            const personalityButtons = document.querySelectorAll('.personality-btn');
            
            personalityButtons.forEach(button => {
                button.addEventListener('click', function() {
                    personalityButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        }
        
        // 聊天功能
        function setupChat() {
            const chatInput = document.querySelector('.chat-input input');
            const sendButton = document.querySelector('.chat-input button');
            const chatContainer = document.querySelector('.chat-container');
            
            function sendMessage() {
                const message = chatInput.value.trim();
                if (message === '') return;
                
                const userMessage = document.createElement('div');
                userMessage.classList.add('message', 'user-message');
                userMessage.textContent = message;
                chatContainer.appendChild(userMessage);
                
                chatInput.value = '';
                
                setTimeout(() => {
                    const aiMessage = document.createElement('div');
                    aiMessage.classList.add('message', 'ai-message');
                    
                    const responses = [
                        '這是一個很好的問題！讓我為你詳細解答...',
                        '我理解你的困惑，讓我們一起分析這個問題。',
                        '這個知識點確實有點複雜，但別擔心，我們可以一步步來理解它。'
                    ];
                    
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    aiMessage.textContent = randomResponse;
                    
                    chatContainer.appendChild(aiMessage);
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }, 1000);
                
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }
            
            sendButton.addEventListener('click', sendMessage);
            
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        }
        
        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            createStars();
            setupModals();
            setupForms();
            setupNavigator();
            setupAIAssistant();
            setupChat();
        });
    </script>
</body>
</html>